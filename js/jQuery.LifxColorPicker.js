!function(t){"use strict";t.fn.LifxColorPicker=function(o){o=t.extend({color:0,brightness:1,changed:function(t,o){}},o);const n=this.find("canvas"),e=this.find(".color .handle"),s=this.find(".brightness .handle");var i=n[0],a=i.getContext("2d");let c=i.width/2,r=i.height/2,h=c;const l=Math.PI/180;function u(t){a.clearRect(0,0,i.width,i.height),a.setTransform(1,0,0,1,0,0),a.translate(c,r),a.rotate(t*l),a.translate(-c,-r),function(){for(var t=0;t<=360;t++){var o=-(t+2)*l,n=-t*l;a.beginPath(),a.moveTo(c+10,r+10),a.arc(c,r,h,o,n,!1),a.closePath();var e=a.createRadialGradient(c,r,0,c,r,h);e.addColorStop(.475,"hsl("+t+", 10%, 100%)"),e.addColorStop(.75,"hsl("+t+", 100%, 50%)"),e.addColorStop(1,"hsl("+t+", 100%, 30%)"),a.fillStyle=e,a.fill()}}()}function d(){const t=e.outerWidth(),n=e.offset().top+t/2,c=e.offset().left+t/2,r=i.getBoundingClientRect(),h=Math.floor(c-r.left),l=Math.floor(n-r.top);var u=a.getImageData(h,l,1,1).data,d="#"+("0000"+(u[2]+256*u[1]+65536*u[0]).toString(16)).substr(-6),f=-(parseInt(s.css("top"))/s.height()).toFixed(1);e.css("background",d),o.changed&&"function"==typeof o.changed&&o.changed(d,f)}function f(t,o){n.outerWidth();const e=n.offset().left+h,s=n.offset().top+h,i=Math.atan2(t-e,o-s);return Math.round(i*(180/Math.PI)*-1+100)}e.on("mousedown",function(){t(document).bind("mousemove",function(t){const o=e.parent(),n=e.outerWidth(),s=o.offset();t.clientX,s.left;var i=t.clientY-s.top;i>o.height()&&(i=o.height()),i<0&&(i=0),e.css("top",i-n/2),d()})}),s.parent().on("mousedown",function(o){var n=o.clientY;const e=parseInt(s.css("top"));t(document).bind("mousemove",e,function(t){s.parent();const o=s.height();var i=e-(n-t.clientY);i>0&&(i=0),i<-o&&(i=-o),s.css("top",i+"px"),d()})}),s.parent().on("mousewheel DOMMouseScroll",function(t){let o=parseInt(s.css("top"));const n=s.height();t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?o+=3:o-=3,o>0&&(o=0),o<-n&&(o=-n),s.css("top",o+"px"),d()}),n.on("mousedown",function(o){const n=f(o.pageX,o.pageY);t(document).bind("mousemove",n,function(t){u(f(t.pageX,t.pageY)-n),d()})}),t(document).on("mouseup",function(){t(document).unbind("mousemove")}),s.css("top",-o.brightness*s.height()),u(o.color),d()}}(jQuery);