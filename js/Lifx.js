module.exports=function(e){const t=window.$||window.jQuery||!1,r=this;if(r.base_url="https://api.lifx.com/v1/",r.token=e,!t)throw"jQuery is required for Lifx()";if(!r.token)throw"An API Authorization token is required. See: https://api.developer.lifx.com/docs/authentication";r.api={},r.api.call=function(e,o,n,i){if(o=o.replace(/^(\/)/,""),n=n||{},i="string"==typeof i?i:"lights/","object"==typeof n)for(var l in n)n[l]||delete n[l];return new Promise((l,a)=>{t.ajax({url:r.base_url+(t.trim(i)?i:"/")+o,type:e,data:n,headers:{Authorization:"Bearer "+r.token}}).then(function(e){l(e)},function(e){a(e)})})},r.api.post=function(e,t,o){return r.api.call("post",e,t)},r.api.get=function(e,t,o){return r.api.call("get",e,t)},r.api.put=function(e,t,o){return r.api.call("put",e,t)};const o=e=>((e="string"==typeof e?e:"all").replace(/^(\/)/,"").replace(/$(\/)/,""),e);r.list_lights=(e=>(e=o(e),r.api.get(e))),r.set_state=((e,n)=>{e=o(e);let i=t.extend({power:"on",color:"",brightness:null,duration:null,infrared:null},n||{});return r.api.put(e+"/state",i)}),r.set_states=((e,t)=>r.api.put("states",{states:e||[],defaults:t||{}})),r.state_delta=(e=>{throw e=o(e),"This function is currently not available."}),r.toggle_power=((e,n)=>{e=o(e);let i=t.extend({duration:null},n||{});return r.api.post(e+"/toggle",i)}),r.breath_effect=((e,n)=>{e=o(e);let i=t.extend({color:"",from_color:"",period:null,cycles:null,persist:!1,power_on:!0,peak:null},n||{});return r.api.post(e+"/effects/breathe",i)}),r.pulse_effect=((e,n)=>{e=o(e);let i=t.extend({color:"",from_color:"",period:null,cycles:null,persist:!1,power_on:!0},n||{});return r.api.post(e+"/effects/pulse",i)}),r.cycle=((e,n)=>{e=o(e);let i=t.extend({states:[],defaults:{},direction:"forward"},n||{});return r.api.post(e+"/cycle",i)}),r.list_scenes=(()=>r.api.get("scenes",!1,"")),r.activate_scene=((e,o)=>{let n=t.extend({duration:null,ignore:[],overrides:{}},o||{});return r.api.put("scenes/"+e+"/activate",n,"")}),r.validate_color=(e=>r.api.get("color",{string:e},""))};