"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){t.fn.LifxColorPicker=function(e){var o=this;e=t.extend(!0,{hue:0,saturation:.5,brightness:1,size:320,changed:function(t){}},e),o.data={hue:0,saturation:0,brightness:0};var n={rotation:0,brightness:0,saturation:0},a=this.find(".dial"),i=this.find(".color .handle"),s=this.find(".brightness .handle"),r=document.createElement("canvas"),u=r.getContext("2d");r.width=e.size,r.height=e.size,u.scale(2,2);var d=e.size/4,h=e.size/4,c=d,f=Math.PI/180,l=180/Math.PI,g=a.offset().left+2*c,p=a.offset().top+2*c;o.hsl=function(){var t=Math.round(100*o.data.saturation);return"hsl("+o.data.hue+", 100%, "+Math.round(100-t/2)+"%)"};var v=function(t,e){var o=Math.atan2(t-g,e-p),n=Math.round(o*l*-1+100);return n<0?360-Math.abs(n):n},b=function(){var t=o.hsl(),r=(1-n.saturation)*(i.parent().outerHeight()-i.outerHeight());if(a.css("transform","rotate("+n.rotation+"deg)"),i.css("background",t),i.css("top",r+"px"),s.css("top",-n.brightness*s.height()+"px"),"function"==typeof e.changed){var u=o.data;u.hsl=o.hsl(),e.changed(u)}};o.set_hue=function(t){var e=void 0!==(void 0===t?"undefined":_typeof(t))?t:o.data.hue;e>360&&(e-=360),e<0&&(e=360-Math.abs(e)),o.data.hue=e,n.rotation=e,b()},o.set_saturation=function(t){(t=void 0!==(void 0===t?"undefined":_typeof(t))?t:o.data.saturation)>1&&(t=1),t<0&&(t=0),o.data.saturation=t.toFixed(2),n.saturation=t,b()},o.set_brightness=function(t){(t=void 0!==(void 0===t?"undefined":_typeof(t))?t:o.data.brightness)>1&&(t=1),t<0&&(t=0),o.data.brightness=t.toFixed(2),n.brightness=t,b()},o.set_color=function(t,e,n){o.set_hue(t),o.set_saturation(e),o.set_brightness(n)},a.on("mousedown",function(e){var a=v(e.pageX,e.pageY),i=n.rotation;t(document).bind("mousemove",function(t){var e=v(t.pageX,t.pageY),n=0;n=e<a?e+360-a:e-a,o.set_hue(i+n)})}),i.on("mousedown",function(){t(document).bind("mousemove",function(t){var e=i.parent(),n=i.outerWidth(),a=n/2,s=e.outerHeight()-n,r=e.offset(),u=t.clientY-(r.top+a);u>s&&(u=s),u<0&&(u=0),o.set_saturation(1-u/s)})}),s.parent().on("mousedown",function(e){var n=e.clientY,a=parseInt(s.css("top"));t(document).bind("mousemove",a,function(t){var e=s.height(),i=a-(n-t.clientY);i>0&&(i=0),i<-e&&(i=-e),o.set_brightness(Math.abs(i)/e)})}),t(document).on("mouseup",function(){t(document).unbind("mousemove")}),t(window).bind("mousewheel DOMMouseScroll",function(t){if(t.target===s.parent()[0]||s.parent().has(t.target).length){var e=100*o.data.brightness,n=0;return n=t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?e-1:e+1,n/=100,o.set_brightness(n),t.preventDefault(),!1}}),function(){for(var t=0;t<=360;t++){var e=-(t+90)*f,o=-(t+88)*f;u.beginPath(),u.moveTo(d,h),u.arc(d,h,c,e,o,!1),u.closePath();var n=u.createRadialGradient(d,h,0,d,h,c);n.addColorStop(.5,"hsl("+t+", 10%, 100%)"),n.addColorStop(.75,"hsl("+t+", 100%, 70%)"),n.addColorStop(1,"hsl("+t+", 100%, 30%)"),u.fillStyle=n,u.fill()}a.css("background-image","url("+r.toDataURL("image/png",1)+")")}(),o.set_color(Math.round(e.hue),parseFloat(e.saturation),parseFloat(e.brightness))}}(jQuery);