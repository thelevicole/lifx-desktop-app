"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){t.fn.LifxColorPicker=function(o){var e=this;o=t.extend(!0,{hue:0,saturation:.5,brightness:1,size:320,changed:function(t){}},o),e.data={hue:0,saturation:0,brightness:0};var n={rotation:0,brightness:0,saturation:0},a=this.find(".dial"),i=this.find(".color .handle"),s=this.find(".brightness .handle"),r=document.createElement("canvas"),u=r.getContext("2d");r.width=o.size,r.height=o.size,u.scale(2,2);var d=o.size/4,h=o.size/4,c=d,f=Math.PI/180,l=180/Math.PI,p=a.offset().left+2*c,g=a.offset().top+2*c;e.hsl=function(){var t=Math.round(100*e.data.saturation);return"hsl("+e.data.hue+", 100%, "+Math.round(100-t/2)+"%)"};var m=function(t,o){var e=Math.atan2(t-p,o-g);return Math.round(e*l*-1+100)},v=function(){var t=e.hsl(),r=(1-n.saturation)*(i.parent().outerHeight()-i.outerHeight());if(a.css("transform","rotate("+n.rotation+"deg)"),i.css("background",t),i.css("top",r+"px"),s.css("top",-n.brightness*s.height()+"px"),"function"==typeof o.changed){var u=e.data;u.hsl=e.hsl(),o.changed(u)}};e.set_hue=function(t){var o=void 0!==(void 0===t?"undefined":_typeof(t))?t:e.data.hue;o>360&&(o-=360),o<0&&(o=360-Math.abs(o)),e.data.hue=o,n.rotation=t,v()},e.set_saturation=function(t){(t=void 0!==(void 0===t?"undefined":_typeof(t))?t:e.data.saturation)>1&&(t=1),t<0&&(t=0),e.data.saturation=t.toFixed(2),n.saturation=t,v()},e.set_brightness=function(t){(t=void 0!==(void 0===t?"undefined":_typeof(t))?t:e.data.brightness)>1&&(t=1),t<0&&(t=0),e.data.brightness=t.toFixed(2),n.brightness=t,v()},e.set_color=function(t,o,n){e.set_hue(t),e.set_saturation(o),e.set_brightness(n)},a.on("mousedown",function(o){var n=m(o.pageX,o.pageY);t(document).bind("mousemove",function(t){var o=m(t.pageX,t.pageY)-n;e.set_hue(o)})}),i.on("mousedown",function(){t(document).bind("mousemove",function(t){var o=i.parent(),n=i.outerWidth(),a=n/2,s=o.outerHeight()-n,r=o.offset(),u=t.clientY-(r.top+a);u>s&&(u=s),u<0&&(u=0),e.set_saturation(1-u/s)})}),s.parent().on("mousedown",function(o){var n=o.clientY,a=parseInt(s.css("top"));t(document).bind("mousemove",a,function(t){var o=s.height(),i=a-(n-t.clientY);i>0&&(i=0),i<-o&&(i=-o),e.set_brightness(Math.abs(i)/o)})}),t(document).on("mouseup",function(){t(document).unbind("mousemove")}),function(){for(var t=0;t<=360;t++){var o=-(t+90)*f,e=-(t+88)*f;u.beginPath(),u.moveTo(d,h),u.arc(d,h,c,o,e,!1),u.closePath();var n=u.createRadialGradient(d,h,0,d,h,c);n.addColorStop(.5,"hsl("+t+", 10%, 100%)"),n.addColorStop(.75,"hsl("+t+", 100%, 70%)"),n.addColorStop(1,"hsl("+t+", 100%, 30%)"),u.fillStyle=n,u.fill()}a.css("background-image","url("+r.toDataURL("image/png",1)+")")}(),e.set_color(Math.round(o.hue),parseFloat(o.saturation),parseFloat(o.brightness))}}(jQuery);