const Lifx=require("./Lifx.js");!function(t){"use strict";const e=new Lifx("xxx");var i=new Vue({el:"[vue-app]",data:{lights:[],light:null},methods:{update_light:function(e,i){for(var r=0;r<this.lights.length;r++)if(this.lights[r].id===e)return this.lights[r]=t.extend(this.lights[r],i),this.lights[r];return!1},get_light:function(t){for(var e=0;e<this.lights.length;e++)if(this.lights[e].id===t)return this.lights[e];return!1}}});Vue.component("light-switch",{props:["data"],template:"#light-switch-template",computed:{percentage:function(){return"on"===this.data.power?100*this.data.brightness+", 100":"0, 100"},linecap:function(){return"on"===this.data.power?"round":"butt"},hex_color:function(){if("string"==typeof this.data.color)return this.data.color;var t,e,i=this.data.color.hue,r=this.data.color.saturation,o=[];if(0===r)t=[1,1,1];else switch(o=[1*(1-r),1*(1-r*((i/=60)-(e=Math.floor(i)))),1*(1-r*(1-(i-e)))],e){case 0:t=[1,o[2],o[0]];break;case 1:t=[o[1],1,o[0]];break;case 2:t=[o[0],1,o[2]];break;case 3:t=[o[0],o[1],1];break;case 4:t=[o[2],o[0],1];break;default:t=[1,o[0],o[1]]}return"#"+t.map(function(t){return("0"+Math.round(255*t).toString(16)).slice(-2)}).join("")}},methods:{toggle:function(){return this.data.power="on"===this.data.power?"off":"on",e.set_state("id:"+this.data.id,{power:this.data.power}),!1},set:function(){return i.light=this.data.id,!1}}}),Vue.component("color-picker",{template:"#color-picker-template",computed:{light:function(){return i.get_light(i.light)}},methods:{close:function(){return i.light=null,!1}},mounted:function(){const r=this.light;var o=!1;t(this.$el).LifxColorPicker({brightness:r.brightness,changed:function(t,n){o&&clearTimeout(o),o=setTimeout(function(){e.set_state("id:"+i.light,{color:t,brightness:n,power:r.power}),i.update_light(i.light,{color:t,brightness:n,power:r.power})},500)}})}}),e.list_lights().then(function(t){i.lights=t})}(jQuery);